import{d as S,a as h,b as t,Z as s}from"./create-injection-key-6dff4bbb.js";import{a8 as w,Z as i}from"./Card-720de80b.js";import{N as U}from"./Form-190bf06a.js";import{N as c}from"./FormItem-94ab7cfc.js";import{N as m}from"./Select-a912f9f4.js";import{N}from"./Switch-042989fd.js";import"./fade-in.cssr-c6d077ce.js";import"./light-8a4490bb.js";import"./light-b93dede2.js";import"./Tag-945120fa.js";import"./_common-991711fd.js";import"./_common-6222e43f.js";const p="mx-admin:setup-api:url",u="mx-admin:setup-api:gateway",B=S({setup(){const a=h({apiUrl:localStorage.getItem("__api")||"",gatewayUrl:localStorage.getItem("__gateway")||"",persist:!1}),n=()=>{const e=new URL(location.href),{apiUrl:l,gatewayUrl:r,persist:y}=a;l&&e.searchParams.set("__api",l),r&&e.searchParams.set("__gateway",r),y&&(l&&localStorage.setItem("__api",l),r&&localStorage.setItem("__gateway",r)),e.pathname="/",e.hash="",localStorage.setItem(p,JSON.stringify([...new Set(o.concat(l))])),localStorage.setItem(u,JSON.stringify([...new Set(o.concat(r))])),location.href=e.toString()},d=()=>{localStorage.removeItem("__api"),localStorage.removeItem("__gateway"),location.href="/"},f=()=>{a.apiUrl="http://localhost:2333",a.gatewayUrl="http://localhost:2333"},o=JSON.safeParse(localStorage.getItem(p)||"[]"),g=JSON.safeParse(localStorage.getItem(u)||"[]");return()=>t("div",{class:"relative h-screen w-full flex items-center justify-center"},[t(w,{title:"设置 API",class:"modal-card sm m-auto form-card"},{default:()=>[t(U,{onSubmit:n},{default:()=>[t(c,{label:"API 地址"},{default:()=>[t(m,{options:o.map(e=>({key:e,value:e,label:e})),filterable:!0,tag:!0,clearable:!0,value:a.apiUrl,onUpdateValue:e=>{a.apiUrl=e}},null)]}),t(c,{label:"Gateway 地址"},{default:()=>[t(m,{tag:!0,options:g.map(e=>({key:e,value:e,label:e})),filterable:!0,clearable:!0,value:a.gatewayUrl,onUpdateValue:e=>{a.gatewayUrl=e}},null)]}),t(c,{label:"持久化",labelPlacement:"left"},{default:()=>[t(N,{value:a.persist,onUpdateValue:e=>{a.persist=e}},null)]}),t("div",{class:"text-center space-x-2"},[t(i,{onClick:f,round:!0},{default:()=>[s("本地调试")]}),t(i,{onClick:d,round:!0},{default:()=>[s("重置")]}),t(i,{onClick:n,round:!0,type:"primary"},{default:()=>[s("确定")]})])]})]})])}});export{B as default};
