import{q as d}from"./use-store-ref-10b7967e.js";import{r as f,z as h}from"./create-injection-key-6dff4bbb.js";const g=l=>d(()=>{const a=f([]),t=new Set;let r=0,s=!1;const i=f(!0),u=async(o=1)=>{i.value=!0;const{data:e,pagination:n}=await l(o);a.value.push(...e.filter(c=>!t.has(c.id))),i.value=!1,e.forEach(c=>t.add(c.id)),r=n.currentPage,n.hasNextPage||(s=!0)};return{loading:i,datalist:a,append(o){for(const e of o)t.has(e.id)||(t.add(e.id),a.value.push({...e}))},fetchNext:()=>{s||u(r+1)},refresh(){this.reset(),h(()=>{this.fetchNext()})},reset(){r=0,s=!1,a.value=[],t.clear()}}});export{g as c};
