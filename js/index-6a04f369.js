import{k as S,B as h,U as t,aO as s,br as i}from"./Button-b701b7aa.js";import{b as U}from"./Card-6ffecc90.js";import{N as w}from"./Form-1e2d1f39.js";import{N as c}from"./FormItem-339a3c72.js";import{N as m}from"./Select-a2a95bdb.js";import{N}from"./Switch-4fc87e76.js";import"./context-079b71da.js";import"./light-b0b9390b.js";import"./light-a088cd9f.js";import"./Tag-0091d0ba.js";import"./_common-991711fd.js";import"./_common-6222e43f.js";const p="mx-admin:setup-api:url",u="mx-admin:setup-api:gateway",J=S({setup(){const a=h({apiUrl:localStorage.getItem("__api")||"",gatewayUrl:localStorage.getItem("__gateway")||"",persist:!1}),n=()=>{const e=new URL(location.href),{apiUrl:l,gatewayUrl:r,persist:y}=a;l&&e.searchParams.set("__api",l),r&&e.searchParams.set("__gateway",r),y&&(l&&localStorage.setItem("__api",l),r&&localStorage.setItem("__gateway",r)),e.pathname="/",e.hash="",localStorage.setItem(p,JSON.stringify([...new Set(o.concat(l))])),localStorage.setItem(u,JSON.stringify([...new Set(o.concat(r))])),location.href=e.toString()},f=()=>{localStorage.removeItem("__api"),localStorage.removeItem("__gateway"),location.href="/"},d=()=>{a.apiUrl="http://localhost:2333",a.gatewayUrl="http://localhost:2333"},o=JSON.safeParse(localStorage.getItem(p)||"[]"),g=JSON.safeParse(localStorage.getItem(u)||"[]");return()=>t("div",{class:"relative h-screen w-full flex items-center justify-center"},[t(U,{title:"设置 API",class:"modal-card sm m-auto form-card"},{default:()=>[t(w,{onSubmit:n},{default:()=>[t(c,{label:"API 地址"},{default:()=>[t(m,{options:o.map(e=>({key:e,value:e,label:e})),filterable:!0,tag:!0,clearable:!0,value:a.apiUrl,onUpdateValue:e=>{a.apiUrl=e}},null)]}),t(c,{label:"Gateway 地址"},{default:()=>[t(m,{tag:!0,options:g.map(e=>({key:e,value:e,label:e})),filterable:!0,clearable:!0,value:a.gatewayUrl,onUpdateValue:e=>{a.gatewayUrl=e}},null)]}),t(c,{label:"持久化",labelPlacement:"left"},{default:()=>[t(N,{value:a.persist,onUpdateValue:e=>{a.persist=e}},null)]}),t("div",{class:"text-center space-x-2"},[t(s,{onClick:d,round:!0},{default:()=>[i("本地调试")]}),t(s,{onClick:f,round:!0},{default:()=>[i("重置")]}),t(s,{onClick:n,round:!0,type:"primary"},{default:()=>[i("确定")]})])]})]})])}});export{J as default};
