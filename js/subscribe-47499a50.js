import{T as h}from"./index-9895a798.js";import{R as w}from"./relative-time-740e13ad.js";import{u as N}from"./use-table-fa04b674.js";import{x as p,K as T}from"./app-5a2221a4.js";import{r as k}from"./use-store-ref-0fa0f74b.js";import{k as m,au as x,R as S,U as r,aO as v,br as s,bq as B}from"./Button-5ec267f1.js";import{a as d}from"./Spin-2c3e5ca3.js";import{N as C}from"./Popconfirm-0c3d3f64.js";import{N as R}from"./Tag-62076a6b.js";import"./DataTable-24c7be6c.js";import"./ChevronRight-54213128.js";import"./Checkbox-746a5c9b.js";import"./light-cfc8873a.js";import"./light-6dc94989.js";import"./light-6fe3aaa1.js";import"./light-1d805342.js";import"./light-efffb436.js";import"./Card-73dd4072.js";import"./Select-410a3ac9.js";import"./Pagination-5b5faf1f.js";import"./Forward-414cae36.js";import"./prop-8b8caa29.js";import"./Tooltip-354350ce.js";import"./preload-helper-f651ca80.js";import"./light-013cc201.js";import"./_common-991711fd.js";function l(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!B(e)}const F=1<<0,O=1<<1,q=1<<2,D=1<<3,nt=m({setup(){const e=k(),{loading:i,checkedRowKeys:a,data:b,pager:n,fetchDataFn:u}=N((t,f)=>async(g=e.query.page||1,y=10)=>{const c=await p.api.subscribe.get({params:{page:g,size:y,sortBy:"created",sortOrder:"-1"}});t.value=c.data,f.value=c.pagination}),o=u;return x(()=>e.query.page,async t=>{await o(t)}),S(async()=>{await u()}),()=>r(T,null,{default:()=>[r(h,{data:b,loading:i.value,columns:[{title:"邮箱",key:"email",ellipsis:{tooltip:!0},width:250},{title:"订阅内容",key:"subscribe",width:250,render(t){return r(j,{bit:t.subscribe},null)}},{title:"创建于",width:250,key:"created",sortOrder:"descend",render(t){return r(w,{time:t.created},null)}},{title:"操作",fixed:"right",width:160,key:"id",render(t){return r(d,null,{default:()=>[r(C,{positiveText:"取消",negativeText:"删除",onNegativeClick:async()=>{await p.api.subscribe.unsubscribe.get({params:{email:t.email,cancelToken:t.cancelToken}}),message.success("删除成功"),await o(n.value.currentPage)}},{trigger:()=>r(v,{text:!0,type:"error",size:"tiny"},{default:()=>[s("移除")]}),default:()=>r("span",{class:"max-w-48"},[s("确定要删除 "),t.title,s("？")])})]})}}],onFetchData:o,pager:n,onUpdateCheckedRowKeys:t=>{a.value=t}},null)]})}}),M=new Map([[F,"博文"],[O,"点滴"],[D,"速记"],[q,"说说"]]),j=m({props:{bit:{type:Number,required:!0}},render(){const e=[];for(const[i,a]of M.entries())i&this.bit&&e.push(r(R,{round:!0},l(a)?a:{default:()=>[a]}));return r(d,null,l(e)?e:{default:()=>[e]})}});export{j as SubscribeBit,O as SubscribeNoteCreateBit,F as SubscribePostCreateBit,D as SubscribeRecentCreateBit,q as SubscribeSayCreateBit,nt as default};
