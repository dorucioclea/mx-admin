import{e as O,k as S,n as k,h as P,u as U}from"./use-store-ref-10b7967e.js";import{a as q}from"./DataTable-ee8322e1.js";import{d as C,r as y,a as F,ab as B,b as T,ac as x}from"./create-injection-key-6dff4bbb.js";const D={"table-row":"_table-row_1brqz_3"},N=D["table-row"],I=C({props:{data:{type:Object,required:!0},noPagination:{type:Boolean,default:!1},pager:{type:Object,required:!1},onUpdateCheckedRowKeys:{type:Function,default:new Function},onUpdateSorter:{type:Function,default:new Function},onFetchData:{type:Function,required:!1},columns:{type:Array,required:!0},nTableProps:{type:Object,default:()=>({})},maxWidth:{type:Number},loading:{type:Boolean,default:!1},checkedRowKey:{type:String,default:"id"}},setup(o){const h=O(),l=S(),c=y([]),n=F({sortBy:"",sortOrder:0}),r=y(!0),g=B(()=>o.data.value,d=>{r.value=!1,g()});k((d,i,t)=>{r.value=!0,t(),r.value=!1});const s=P(U);return()=>{const{data:d,noPagination:i=!1,pager:t,onUpdateCheckedRowKeys:w,onUpdateSorter:b,nTableProps:m,columns:p,onFetchData:f,checkedRowKey:v="id",maxWidth:R=1200}=o;return T(q,x({loading:o.loading??r.value,remote:!0,scrollX:Math.max(s.contentInsetWidth.value,R),pagination:i?void 0:t&&{page:t.value.currentPage,pageSize:t.value.size,pageCount:t.value.totalPage,showQuickJumper:!0,pageSlot:s.viewport.value.mobile?s.contentInsetWidth.value<400?2:3:void 0,onChange:async e=>{h.push({query:{...l.query,page:e},path:l.path})}},bordered:!1,data:d.value,rowClassName:()=>N,checkedRowKeys:c.value,rowKey:e=>e[v],onUpdateCheckedRowKeys:e=>{c.value=e,w?.(e)},onUpdateSorter:async e=>{if(!e)return;p.forEach(a=>{if("sortOrder"in a&&a.sortOrder!==void 0){if(!e){a.sortOrder=!1;return}a.key===e.columnKey?a.sortOrder=e.order:a.sortOrder=!1}});const{columnKey:K,order:u}=e;n.sortBy=u===!1?"":K.toString()||"",n.sortOrder=u?{descend:-1,ascend:1}[u]:1,b?.(n,e),f&&await f()},columns:p},m),null)}}});export{I as T,N as t};
